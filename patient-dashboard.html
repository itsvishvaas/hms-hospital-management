<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Dashboard</title>
    <link rel="stylesheet" href="styles2.css" />
  </head>
  <body>
    <!-- <section id="header">
      <a href="index.html"><img src="img/logo.avif" class="logo" alt="" /></a>
      <div id="name">
        <h2>SVR Hospital</h2>
      </div>

      <div>
        <ul id="navbar">
          <li><a href="index.html">Logout</a></li>
        </ul>
      </div>
    </section> -->

    <section class="navbar2">
      <!-- <nav class="navbar2"> -->
      <ul class="navbar-nav">
        <li class="logo2">
          <a href="#" class="nav-link">
            <span class="link-text logo-text">SVR</span>
            <svg
              aria-hidden="true"
              focusable="false"
              data-prefix="fad"
              data-icon="angle-double-right"
              role="img"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 448 512"
              class="svg-inline--fa fa-angle-double-right fa-w-14 fa-5x"
            >
              <g class="fa-group">
                <path
                  fill="currentColor"
                  d="M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94 23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1 0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94 23.94 0 0 1 .1 34z"
                  class="fa-secondary"
                ></path>
                <path
                  fill="currentColor"
                  d="M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224 386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94 0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24 0 0 1-.11 34z"
                  class="fa-primary"
                ></path>
              </g>
            </svg>
          </a>
        </li>

        <li class="nav-item" id="item1">
          <a
            href="#"
            data-page="dashboard"
            onclick="redirectTodashboard()"
            class="nav-link"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
              <path
                d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"
              />
            </svg>
            <span class="link-text">Dashboard</span>
          </a>
        </li>

        <li class="nav-item">
          <a
            href="#"
            data-page="medical-records"
            onclick="redirecttomedhis()"
            class="nav-link"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
              <path
                d="M96 352V96c0-35.3 28.7-64 64-64H416c35.3 0 64 28.7 64 64V293.5c0 17-6.7 33.3-18.7 45.3l-58.5 58.5c-12 12-28.3 18.7-45.3 18.7H160c-35.3 0-64-28.7-64-64zM272 128c-8.8 0-16 7.2-16 16v48H208c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h48v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V256h48c8.8 0 16-7.2 16-16V208c0-8.8-7.2-16-16-16H320V144c0-8.8-7.2-16-16-16H272zm24 336c13.3 0 24 10.7 24 24s-10.7 24-24 24H136C60.9 512 0 451.1 0 376V152c0-13.3 10.7-24 24-24s24 10.7 24 24l0 224c0 48.6 39.4 88 88 88H296z"
              />
            </svg>
            <span class="link-text">Medical Records</span>
          </a>
        </li>

        <li class="nav-item">
          <a
            href="#"
            data-page="prescription"
            onclick="redirectTopres()"
            class="nav-link"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
              <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
              <path
                d="M0 32C0 14.3 14.3 0 32 0H352c17.7 0 32 14.3 32 32V64c0 17.7-14.3 32-32 32H32C14.3 96 0 81.7 0 64V32zm32 96H352V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zM160 240v48H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h48v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V352h48c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16H224V240c0-8.8-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"
              />
            </svg>
            <span class="link-text">Prescription</span>
          </a>
        </li>

        <li class="nav-item">
          <a
            href="#"
            data-page="appointments"
            onclick="redirectToAppointment()"
            class="nav-link"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
              <path
                d="M128 0c13.3 0 24 10.7 24 24V64H296V24c0-13.3 10.7-24 24-24s24 10.7 24 24V64h40c35.3 0 64 28.7 64 64v16 48V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192 144 128C0 92.7 28.7 64 64 64h40V24c0-13.3 10.7-24 24-24zM400 192H48V448c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V192zM329 297L217 409c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"
              />
            </svg>
            <span class="link-text">Appointments</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            href="#"
            data-page="appointments"
            onclick="redirectToNotification()"
            class="nav-link"
          >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M439.4 362.3c-19.3-20.8-55.5-52-55.5-154.3 0-77.7-54.5-139.9-127.9-155.2V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v20.8C118.6 68.1 64.1 130.3 64.1 208c0 102.3-36.2 133.5-55.5 154.3-6 6.5-8.7 14.2-8.6 21.7 .1 16.4 13 32 32.1 32h383.8c19.1 0 32-15.6 32.1-32 .1-7.6-2.6-15.3-8.6-21.7zM67.5 368c21.2-28 44.4-74.3 44.5-159.4 0-.2-.1-.4-.1-.6 0-61.9 50.1-112 112-112s112 50.1 112 112c0 .2-.1 .4-.1 .6 .1 85.1 23.3 131.5 44.5 159.4H67.5zM224 512c35.3 0 64-28.7 64-64H160c0 35.4 28.7 64 64 64z"/></svg>
            <span class="link-text">Notifications</span>
          </a>
        </li>

        <li class="nav-item" id="themeButton">
          <a href="index.html" class="nav-link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
              <path
                d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"
              />
            </svg>
            <span class="link-text">Logout</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
      <h1>Patient Dashboard</h1>
      <div class="patient-details">
        <h2>Patient Details</h2>
        <div class="detail-row">
          <div class="detail">
            <label>Name:</label>
            <span id="name1">Fetching...</span>
          </div>
          <div class="detail">
            <label>Date of Birth:</label>
            <span id="dob">Fetching...</span>
          </div>
          <div class="detail">
            <label>Age:</label>
            <span id="age">Fetching...</span>
          </div>
          <div class="detail">
            <label>Phone:</label>
            <span>+91 </span>
            <span id="phone">Fetching...</span>
          </div>
          <div class="detail">
            <label>Address:</label>
            <span id="address">Fetching...</span>
          </div>
        </div>
        <div class="detail-row">
          <div class="detail">
            <label>Gender:</label>
            <span id="gender">Fetching...</span>
          </div>
          <div class="detail">
            <label>Blood Group:</label>
            <span id="blood-group">Fetching...</span>
          </div>
          <div class="detail">
            <label>Height:</label>
            <span id="height">Fetching...</span>
            <span>cm</span>
          </div>
          <div class="detail">
            <label>Weight:</label>
            <span id="weight">Fetching...</span>
            <span>kg</span>
          </div>
          <div class="detail">
            <label>BMI:</label>
            <span id="bmi">Fetching...</span>
          </div>
        </div>
      </div>
    </div>
    <!-- </div> -->

    <script>
      async function fetchPatientDetails(pid) {
        const response = await fetch("http://localhost:7878/patientextract", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ id: pid }),
        });

        const data = await response.json();
        console.log(data);
        document.getElementById("name1").textContent =
          data.patient.patient_name;
        document.getElementById("dob").textContent = data.patient.dob;
        document.getElementById("age").textContent = data.patient.age;
        document.getElementById("phone").textContent = data.patient.phone;
        document.getElementById("address").textContent = data.patient.address;
        document.getElementById("gender").textContent = data.patient.gender;
        document.getElementById("blood-group").textContent = data.patient.blood;
        document.getElementById("height").textContent = data.patient.height;
        document.getElementById("weight").textContent = data.patient.weight;
        document.getElementById("bmi").textContent = data.bmi;
      }
      const urlParams = new URLSearchParams(window.location.search);
      const patientId = urlParams.get("patientId");
      // Call fetchPatientDetails function when the page loads
      window.onload = fetchPatientDetails(patientId);
      function redirectToAppointment() {
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get("patientId");
        window.location.href = `patient-appointment.html?patientId=${patientId}`;
      }
      function redirecttomedhis() {
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get("patientId");
        window.location.href = `patient-medhis.html?patientId=${patientId}`;
      }
      function redirectTopres() {
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get("patientId");
        window.location.href = `patient-pres.html?patientId=${patientId}`;
      }
      function redirectTodashboard() {
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get("patientId");
        window.location.href = `patient-dashboard.html?patientId=${patientId}`;
      }
      function redirectToNotification(){
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get("patientId");
        window.location.href = `patient-notification.html?patientId=${patientId}`;
      }
    </script>
  </body>
</html>
